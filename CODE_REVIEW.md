# üîç Code Review: DjangoFirstShop

## ‚úÖ –ü–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã

1. **–ë–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞** ‚Äî –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω–∞, —Å–ª–µ–¥—É–µ—Ç Django –∫–æ–Ω–≤–µ–Ω—Ü–∏—è–º
2. **Docker** ‚Äî –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è —Å PostgreSQL
3. **–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã** ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è ruff –¥–ª—è –ª–∏–Ω—Ç–∏–Ω–≥–∞
4. **–ú–æ–¥–µ–ª–∏** ‚Äî –∞–¥–µ–∫–≤–∞—Ç–Ω—ã–µ —Å–≤—è–∑–∏ (ForeignKey, validators)
5. **–§–æ—Ä–º—ã –∏ views** ‚Äî –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç –±–∞–∑–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

---

## üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**
- `SECRET_KEY` –∑–∞—Ö–∞—Ä–¥–∫–æ–¥–µ–Ω –≤ `settings.py` (—Å—Ç—Ä–æ–∫–∞ 24)
- `DEBUG = True` –∏ `ALLOWED_HOSTS = []` ‚Äî –Ω–µ–±–µ–∑–æ–ø–∞—Å–Ω–æ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
- –ü–∞—Ä–æ–ª–∏ –ë–î (`admin/admin`) –≤ –æ—Ç–∫—Ä—ã—Ç–æ–º –≤–∏–¥–µ –≤ `settings.py` –∏ `docker-compose.yaml`
- **–†–µ—à–µ–Ω–∏–µ**: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, `python-decouple` –∏–ª–∏ `django-environ`)

```python
# –ü—Ä–∞–≤–∏–ª—å–Ω–æ:
from decouple import config
SECRET_KEY = config('SECRET_KEY')
DEBUG = config('DEBUG', default=False, cast=bool)
```

### 2. **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –≤ git**
- `db.sqlite3` (147KB) –∫–æ–º–º–∏—Ç–∏—Ç—Å—è –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
- –•–æ—Ç—è –≤ `.gitignore` –µ—Å—Ç—å –ø—Ä–∞–≤–∏–ª–æ `db.sqlite3`, —Ñ–∞–π–ª —É–∂–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç—Å—è
- **–†–µ—à–µ–Ω–∏–µ**: 
  ```bash
  git rm --cached db.sqlite3
  git commit -m "Remove database from version control"
  ```

### 3. **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞**
- `user/views.py` –∏ `user_auth/views.py` —Å–æ–¥–µ—Ä–∂–∞—Ç –∏–¥–µ–Ω—Ç–∏—á–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (`register`, `user_login`, `me`, `logout_view`)
- –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ `user` –≤–æ–æ–±—â–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è (–ø—É—Å—Ç–æ–π `models.py`)
- **–†–µ—à–µ–Ω–∏–µ**: —É–¥–∞–ª–∏—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ, –æ—Å—Ç–∞–≤–∏—Ç—å –æ–¥–∏–Ω –º–æ–¥—É–ª—å

### 4. **DRF –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω**
- –ò–º–ø–æ—Ä—Ç—ã `rest_framework` –≤ –∫–æ–¥–µ, –Ω–æ –Ω–µ—Ç –≤ `INSTALLED_APPS`
- –ù–µ—Ç `djangorestframework` –≤ `requirements.txt`
- JWT —Ç–æ–∫–µ–Ω—ã –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è, –Ω–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `djangorestframework-simplejwt`
- **–†–µ—à–µ–Ω–∏–µ**: –¥–æ–±–∞–≤–∏—Ç—å –≤ settings.py:
  ```python
  INSTALLED_APPS = [
      ...
      'rest_framework',
  ]
  ```

### 5. **–ü—Ä–æ–±–ª–µ–º—ã —Å JWT**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `datetime.now()` –±–µ–∑ timezone (—Å—Ç—Ä–æ–∫–∞ 65 –≤ `user_auth/models.py`)
- `print(user, user.token, "Eto creating user")` ‚Äî –æ—Ç–ª–∞–¥–æ—á–Ω—ã–π –≤—ã–≤–æ–¥ –≤ –ø—Ä–æ–¥–∞–∫—à–Ω-–∫–æ–¥–µ (—Å—Ç—Ä–æ–∫–∞ 22)
- **–†–µ—à–µ–Ω–∏–µ**: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `datetime.now(timezone.utc)` –∏ —É–±—Ä–∞—Ç—å print

---

## ‚ö†Ô∏è –°–µ—Ä—å–µ–∑–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

### 6. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏**
- –ù–µ—Ç `README.md` —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –ø—Ä–æ–µ–∫—Ç–∞
- –ù–µ—Ç –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π –ø–æ –∑–∞–ø—É—Å–∫—É
- –ù–µ—Ç –æ–ø–∏—Å–∞–Ω–∏—è API endpoints

### 7. **–û—Ç–ª–∞–¥–æ—á–Ω—ã–π –∫–æ–¥**
- –ú–Ω–æ–∂–µ—Å—Ç–≤–æ –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö print-–æ–≤ (`store/views.py`, `user_auth/views.py`)
- –ó–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏ –∫–æ–¥–∞ –≤–º–µ—Å—Ç–æ –∏—Ö —É–¥–∞–ª–µ–Ω–∏—è
- **–†–µ—à–µ–Ω–∏–µ**: –æ—á–∏—Å—Ç–∏—Ç—å –æ—Ç debug-–∫–æ–¥–∞ –ø–µ—Ä–µ–¥ —Ä–µ–≤—å—é

### 8. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ç–µ—Å—Ç–æ–≤**
- `tests.py` –ø—É—Å—Ç—ã–µ –≤–æ –≤—Å–µ—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö
- –ù–µ—Ç –ø–æ–∫—Ä—ã—Ç–∏—è –¥–∞–∂–µ –∫—Ä–∏—Ç–∏—á–Ω–æ–π –ª–æ–≥–∏–∫–∏ (authentication, rating)
- **–†–µ—à–µ–Ω–∏–µ**: –Ω–∞–ø–∏—Å–∞—Ç—å —Ö–æ—Ç—è –±—ã –±–∞–∑–æ–≤—ã–µ unit-—Ç–µ—Å—Ç—ã

### 9. **–ü—Ä–æ–±–ª–µ–º—ã –≤ –º–æ–¥–µ–ª—è—Ö**
- `Product.created` ‚Äî –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `auto_now_add=True` (–ø—Ä–∏—Ö–æ–¥–∏—Ç—Å—è –≤–≤–æ–¥–∏—Ç—å –≤—Ä—É—á–Ω—É—é –≤ —Ñ–æ—Ä–º–µ)
- `Product.average_rating` ‚Äî —Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤—ã—á–∏—Å–ª—è–µ–º–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è (–ª—É—á—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å aggregation)
- –°–º–µ—à–∞–Ω–Ω—ã–π —è–∑—ã–∫ –≤ verbose_name (—Ä—É—Å—Å–∫–∏–π –∏ –∞–Ω–≥–ª–∏–π—Å–∫–∏–π)

```python
# –ò—Å–ø—Ä–∞–≤–∏—Ç—å:
created = models.DateTimeField(auto_now_add=True, verbose_name="Created at")
```

### 10. **–ü—Ä–æ–±–ª–µ–º—ã –≤–æ views**
- `store/views.py:8` ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `Product.objects.get()` –≤–º–µ—Å—Ç–æ `get_object_or_404()` (–º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ 500 –≤–º–µ—Å—Ç–æ 404)
- –ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ–¥—É–∫—Ç–∞ (`@login_required`, `@permission_required`)
- –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –ø–∞–≥–∏–Ω–∞—Ü–∏—è –¥–ª—è —Å–ø–∏—Å–∫–∞ –ø—Ä–æ–¥—É–∫—Ç–æ–≤

### 11. **–ö–æ–¥–∏—Ä–æ–≤–∫–∞ —Ñ–∞–π–ª–æ–≤**
- `requirements.txt` –≤ UTF-16LE (—ç–∫–∑–æ—Ç–∏—á–µ—Å–∫–∞—è –∫–æ–¥–∏—Ä–æ–≤–∫–∞)
- **–†–µ—à–µ–Ω–∏–µ**: –ø–µ—Ä–µ—Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ UTF-8

---

## üìù –£–ª—É—á—à–µ–Ω–∏—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

### 12. **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫**
–°–æ–∑–¥–∞—Ç—å `settings/` —Å —Ñ–∞–π–ª–∞–º–∏ `base.py`, `dev.py`, `prod.py`

### 13. **–°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã**
–ù–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω `STATIC_ROOT` –¥–ª—è —Å–±–æ—Ä–∫–∏ —Å—Ç–∞—Ç–∏–∫–∏ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ

### 14. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**
–û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

### 15. **–í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö**
- –í `product_rate` –Ω–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–∏–∞–ø–∞–∑–æ–Ω–∞ –æ—Ü–µ–Ω–∫–∏ (–º–æ–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å -100 –∏–ª–∏ 1000)
- –ù–µ—Ç –∑–∞—â–∏—Ç—ã –æ—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è

```python
# –î–æ–±–∞–≤–∏—Ç—å:
if not (1 <= score <= 5):
    return HttpResponseBadRequest("Invalid rating")
```

### 16. **–ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –∫–æ–¥–∞**
- –°–º–µ—à–µ–Ω–∏–µ –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ –∏ —Ä—É—Å—Å–∫–æ–≥–æ –≤ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è—Ö
- –ù–µ—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω—ã–µ –∫–∞–≤—ã—á–∫–∏ (`"` vs `'`)
- **–†–µ—à–µ–Ω–∏–µ**: –≤—ã–±—Ä–∞—Ç—å –æ–¥–∏–Ω —è–∑—ã–∫ –¥–ª—è –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤, –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å `ruff` –∏–ª–∏ `black`

---

## üêõ –ú–µ–ª–∫–∏–µ –±–∞–≥–∏

17. **–§–æ—Ä–º–∞ CreateProductForm** ‚Äî `available = forms.BooleanField(required=True)` –≤—Å–µ–≥–¥–∞ —Ç—Ä–µ–±—É–µ—Ç True (–ª–æ–≥–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞)
18. **–í—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–∞–π–ª** ‚Äî `tmp_my.py` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ (–¥–æ–±–∞–≤–∏—Ç—å –≤ .gitignore)
19. **–ó–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥ –≤ Dockerfile** (—Å—Ç—Ä–æ–∫–∏ 13-14)
20. **Inconsistent naming** ‚Äî `user_auth` vs `user` (–≤—ã–±—Ä–∞—Ç—å –µ–¥–∏–Ω–æ–µ –∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ)

---

## üìã –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º

### –í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:
1. –í—ã–Ω–µ—Å—Ç–∏ —Å–µ–∫—Ä–µ—Ç—ã –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
2. –£–¥–∞–ª–∏—Ç—å db.sqlite3 –∏–∑ git
3. –î–æ–±–∞–≤–∏—Ç—å rest_framework –≤ INSTALLED_APPS –∏ requirements
4. –£–±—Ä–∞—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ –º–µ–∂–¥—É user –∏ user_auth
5. –ù–∞–ø–∏—Å–∞—Ç—å README.md

### –°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:
6. –î–æ–±–∞–≤–∏—Ç—å –±–∞–∑–æ–≤—ã–µ —Ç–µ—Å—Ç—ã
7. –£–±—Ä–∞—Ç—å –æ—Ç–ª–∞–¥–æ—á–Ω—ã–π –∫–æ–¥ (print, –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏)
8. –ò—Å–ø—Ä–∞–≤–∏—Ç—å timezone –≤ JWT
9. –î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é —Ä–µ–π—Ç–∏–Ω–≥–∞
10. –°–¥–µ–ª–∞—Ç—å auto_now_add –¥–ª—è created

### –ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:
11. –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å —è–∑—ã–∫ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
12. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ª–∏–Ω—Ç–µ—Ä
13. –î–æ–±–∞–≤–∏—Ç—å –ø–∞–≥–∏–Ω–∞—Ü–∏—é
14. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
15. –†–∞–∑–¥–µ–ª–∏—Ç—å settings –Ω–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

---

## üí° –û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞

**–ü–ª—é—Å—ã:** –ë–∞–∑–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç–∞–µ—Ç, –µ—Å—Ç—å Docker, —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–æ–Ω—è—Ç–Ω–∞  
**–ú–∏–Ω—É—Å—ã:** –ü—Ä–æ–±–ª–µ–º—ã —Å –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å—é, –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞, –Ω–µ—Ç —Ç–µ—Å—Ç–æ–≤, –Ω–µ–¥–æ–∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–æ–≤–∞–Ω DRF

**–û—Ü–µ–Ω–∫–∞:** 6/10 ‚Äî —Ö–æ—Ä–æ—à–∏–π —Å—Ç–∞—Ä—Ç –¥–ª—è —É—á–µ–±–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞, –Ω–æ —Ç—Ä–µ–±—É–µ—Ç—Å—è —Å–µ—Ä—å–µ–∑–Ω–∞—è –¥–æ—Ä–∞–±–æ—Ç–∫–∞ –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –≤ —Ä–µ–∞–ª—å–Ω—ã—Ö —É—Å–ª–æ–≤–∏—è—Ö.
